## Описание

В проекте реализована система обзвона абонентов. Все абоненты хранятся в базе данных mnesia. Проект выполнен с использованием языка Erlang и собран с помощью инструмента Rebar3.


### Основные компоненты проекта 

- [`user_db.erl`](webRTP/apps/webRTP/src/user_db.erl) - отвечает за взаимодействие с базой данных абонентов.
    
    Этот модуль использует mnesia. 

    Он поддерживает следующие функции:

    - **create_and_start**: Создает схему mnesia, таблицу абонентов (если ее еще нет) и запускает mnesia.
    - **add_value**: Добавляет данные в таблицу абонентов.
    - **delete_value**: Удаляет данные из таблицы абонентов по номеру абонента.
    - **show_value**: Возвращает информацию об абоненте по его номеру.
    - **show_values**: Возвращает список всех абонентов.

    Внутренние функции модуля включают `fill_db_if_json_exists`, который заполняет базу данных данными из файла [abonents.json](database/abonents.json), если JSON-файл существует.

- [`abonent_handler.erl`](webRTP/apps/webRTP/src/abonent_handler.erl) - обрабатывает запросы к конкретному абоненту.

    Он поддерживает следующие методы:

    - **GET**: Инициирует звонок через `sip_calls_api:call/1`.
    - **DELETE**: Удаляет абонента по его номеру. 
    - **POST**: Добавляет нового абонента в базу данных.
    - Все другие методы возвращают ошибку 405 (метод не поддерживается).

- [`abonents_handler.erl`](webRTP/apps/webRTP/src/abonents_handler.erl) - обрабатывает запросы ко всем абонентам.

    Он поддерживает следующие методы:

    - **GET**: Инициирует обзвон всех абонентов, хранящихся в базе данных.
    - Все другие методы возвращают ошибку 405 (метод не поддерживается).

- [`sip_calls_api.erl`](webRTP/apps/webRTP/src/sip_calls_api.erl) - реализует функциональность для осуществления звонков с использованием протокола SIP.

    Он поддерживает следующие функции:

    - **start**: Запускает сервис nksip.
    - **call**: Инициирует звонок с указанным номером абонента. Эта функция регистрирует абонента в сервисе nksip, инициирует звонок и обрабатывает результат звонка.
    - **call_all**: Инициирует звонки всем абонентам в списке.

    Внутренние функции модуля включают `voice_generation`, который генерирует голосовое сообщение для абонента (с использованием интерфейса командной строки библиотеки gTTS).

    Этот модуль использует библиотеку nksip для работы с протоколами SIP и SDP.

## Тестирование

[Демонстрация работы проекта](https://drive.google.com/file/d/19jaeZofMIoc-86HV0jLGIzqw0j1ks9aT/preview)


## Запуск проекта

1. **Сборка образа Docker**: 

    `docker build -t course_image .`

2. **Запуск контейнера Docker**: 

    `docker run --name course_container -p 80:80 -p 5060:5060 course_image`